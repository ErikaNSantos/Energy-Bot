# ‚ö° Residential Energy Monitoring Bot

A Telegram personal assistant designed to track, calculate, and predict residential electrical energy consumption in real-time. This project replaces manual spreadsheets with an event-based "Start/Stop" system, persisting data in SQLite and applying engineering rules to estimate the final monthly invoice.

## ü§ñ The "Housemates" (Monitored Hardware)

The bot was customized for the specific hardware of the residence, affectionately nicknamed by the users:

| Nickname | Appliance | Real Model | Calculation Logic |
| :--- | :--- | :--- | :--- |
| **‚ùÑÔ∏è Artolfo** | Air Conditioner | Gree G-Top Connection (Inverter) | Thermal Load Calculation (Set Point vs. Power Consumption) |
| **üöø Shauna** | Electric Shower | Lorenzetti Advanced Quadra | Fixed power per selector position (W) x Time |
| **üß∫ Morrisse** | Washing Machine | Electrolux LES11 (11kg) | Fixed cost per Cycle (Motor Energy - Passive Soaking) |
| **üåÄ Versares** | Fan | Ultra 30cm | Nominal power (50W) x Time |## üß† Data Engineering & Business Rules

Unlike generic calculators, this project applies heuristics based on the appliances' technical datasheets:### 1. Air Conditioner (Inverter Logic)

Based on the **ACEEE (American Council for an Energy-Efficient Economy)** rule.- Power consumption is non-linear.- **Applied Rule:** Estimated savings of ~7% for every 1¬∞C (1.8¬∞F) increase in the thermostat setting.- *Example:* "Eco Mode (26¬∞C)" consumes ~580W, while "Freezing Mode (20¬∞C)" peaks at 900W.### 2. Washing Machine (Top Load)

Based on the **INMETRO label (0.34 kWh/cycle)**.- The code ignores the total washing duration (which includes passive soaking with zero consumption).- Cost is calculated based on **Motor Activity**: Quick cycles or "Spin Only" modes cost a fraction of the full cycle, regardless of the total duration.

### 3. Dynamic Tariffs- System prepared for **Tariff Flags** (Green, Yellow, Red).- kWh cost is configurable via JSON to reflect local utility rates (Coelba - Bahia, Brazil).

## üõ†Ô∏è Tech Stack
- **Language:** Python 3.12
- **Interface:** [PyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI) (Telebot)
- **Database:** SQLite3 (Native, lightweight, and serverless)
- **Security:** Python-dotenv (Environment variable management)
- **Engineering:** Data modeling for time series (usage logs).

## üöÄ How to Run the Project
### Prerequisites
- Python 3.8+
- Telegram Account and a Token generated by @BotFather

### Installation

1. Clone the repository:
   ```bash
   git clone [https://github.com/YOUR-USERNAME/energy-monitor-bot.git](https://github.com/YOUR-USERNAME/energy-monitor-bot.git)
   cd energy-monitor-bot
   ```
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
3. Configure security
* Create a `.env` file in the project root
* Add your token: `TELEGRAM_TOKEN=your_token_here`
  
4. Run the bot
   ```bash
   python interface/telegram_bot.py
   ```

## üóÉÔ∏è Database Structure

The system automatically creates a `logs.db` file with two main tables:

* **sessoes_ativas (active_sessions):** Stores the current state (Running Timer). Ensures that if the script restarts, the timer keeps running.
* **historico_uso (usage_history):** Definitive log with cost (BRL), consumption (kWh), and duration, calculated after the appliance is turned off.

## üìù Status

üöß **Under Development:** Implementing monthly reports (`/invoice`) and consumption charts.
